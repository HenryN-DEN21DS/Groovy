plugins {
    id 'maven-publish'
}

def componentName = 'java'
if (pluginManager.hasPlugin('java-platform')) {
    componentName = 'javaPlatform'
}

publishing {
    repositories {
        maven {
            name "FileRepo"
            url "${rootProject.buildDir}/repo"
        }
    }
    publications {
        maven(MavenPublication) {
            from components[componentName]
        }
    }
}
